
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://alejandroescobar264.github.io/morfometria_craneos/desarrollo/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../modelos/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Desarrollo - Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#desarrollo" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales" class="md-header__button md-logo" aria-label="Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Desarrollo
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Inicio

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Desarrollo

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../modelos/" class="md-tabs__link">
        
  
    
  
  Modelos

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../resultado/" class="md-tabs__link">
        
  
    
  
  Resultados

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales" class="md-nav__button md-logo" aria-label="Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Adquisición y Análisis de Datos Morfométricos Craneales Multidimensionales
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Desarrollo
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Desarrollo
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#version-10" class="md-nav__link">
    <span class="md-ellipsis">
      Versión 1.0
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Versión 1.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#analisis-en-2d" class="md-nav__link">
    <span class="md-ellipsis">
      Análisis en 2D
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analisis-en-3d" class="md-nav__link">
    <span class="md-ellipsis">
      Análisis en 3D
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Análisis en 3D">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fotometria-digital" class="md-nav__link">
    <span class="md-ellipsis">
      Fotometría digital
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#escaner-3d" class="md-nav__link">
    <span class="md-ellipsis">
      Escaner 3D
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Escaner 3D">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rutina-de-escaneo" class="md-nav__link">
    <span class="md-ellipsis">
      Rutina de Escaneo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procesado-de-imagenes" class="md-nav__link">
    <span class="md-ellipsis">
      Procesado de Imágenes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Procesado de Imágenes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acondicionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Acondicionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reconstruccion-3d" class="md-nav__link">
    <span class="md-ellipsis">
      Reconstrucción 3D
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mejora-condiciones" class="md-nav__link">
    <span class="md-ellipsis">
      Mejora Condiciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mejora Condiciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fotografias" class="md-nav__link">
    <span class="md-ellipsis">
      Fotografías
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iluminacion" class="md-nav__link">
    <span class="md-ellipsis">
      Iluminación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20" class="md-nav__link">
    <span class="md-ellipsis">
      Versión 2.0
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Versión 2.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flujo-de-trabajo" class="md-nav__link">
    <span class="md-ellipsis">
      Flujo de Trabajo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flujo de Trabajo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#condiciones-de-captura" class="md-nav__link">
    <span class="md-ellipsis">
      Condiciones de Captura
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procesado-de-fotos" class="md-nav__link">
    <span class="md-ellipsis">
      Procesado de Fotos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codigo-arduino" class="md-nav__link">
    <span class="md-ellipsis">
      Código arduino
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modelos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modelos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resultado/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resultados
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="desarrollo">Desarrollo</h1>
<h2 id="version-10">Versión 1.0</h2>
<h3 id="analisis-en-2d">Análisis en 2D</h3>
<p>En base a caracteres morfológicos discretos o el análisis univariado de variables escalares, una nueva especie de murciélago del género Molossus -definida genéticamente - no podía ser operativamente diferenciada de otros 3 molóssidos que cohabitan en la región central. A partir de este planteo, en base a criterios de factibilidad, se lograron identificar, seleccionar críticamente, implementar y testear comparativamente una batería de métodos de adquisición y análisis de datos multidimensionales de morfometría craneal basados en medidas lineales (Fig1) y landmarks en imágenes 2D (Fig2).</p>
<p><img alt="Fig1: Análisis de Morfometría Multidimensional 2D" class="image50percent" src="../img/fig_1.png" /></p>
<p><img alt="Fig2: Análisis de Morfometría con Landmarks 2D" class="image50percent" src="../img/fig_2.png" /></p>
<h3 id="analisis-en-3d">Análisis en 3D</h3>
<p>Para llevar a cabo el análisis morfométrico en 3D, se emplearon técnicas de fotogrametría digital con el fin de obtener un modelo tridimensional del cráneo. </p>
<p>La fotogrametría digital consiste en capturar imágenes del objeto desde múltiples ángulos y utilizar software especializado para combinar estas imágenes y reconstruir una representación tridimensional precisa del objeto en cuestión. Este enfoque permite capturar no solo las dimensiones lineales del objeto, sino también su forma y estructura en tres dimensiones, lo que proporciona una visión más completa de la morfología craneal. </p>
<p>El modelo tridimensional obtenido se utilizará posteriormente para realizar análisis morfométricos detallados, permitiendo comparaciones precisas entre la nueva especie de murciélago y otras especies del género Molossus presentes en la región central.</p>
<h4 id="fotometria-digital">Fotometría digital</h4>
<p>Para ajustar el procedimiento, se utilizó inicialmente un modelo de cráneo de murciélago pálido (Antrozous pallidus) disponible gratuitamente en <a href="https://www.thingiverse.com/thing:5380972">thingiverse.com</a>. El modelo fue escalado para ajustarse al tamaño del cráneo de Molossus. </p>
<p><img alt="Modelos de pruebas" src="../img/craneos.png" /></p>
<p>Se estableció un setup experimental para capturar fotografías de manera automatizada. En primer lugar, se llevaron a cabo pruebas conceptuales utilizando motores paso a paso y una placa de desarrollo Arduino UNO:</p>
<p><img alt="Prueba de concepto" src="../img/prueba_concepto_1.png" /></p>
<p>Posteriormente, se exploró la viabilidad de emplear una cámara web USB para el proceso:</p>
<p><img alt="Prueba de cámara web" src="../img/prueba_concepto_2.png" /></p>
<p>Se realizaron pruebas adicionales con una caja de iluminación para mejorar las condiciones de captura:</p>
<p><img alt="Prueba del setup" src="../img/prueba_concepto_3.png" /></p>
<p>Con estas pruebas se obtuvieron imágenes de poca calidad que no capturaban todas las características del objeto de prueba.</p>
<p><img alt="Primeras Imágenes" src="../img/primeras_imagenes.png" /></p>
<h4 id="escaner-3d">Escaner 3D</h4>
<p>Para aumentar la repetibilidad en el escaneo de los cráneos, se decidió adaptar un modelo de escáner 3D utilizando la técnica de fotogrametría de OpenScan en su versión clásica. Este escáner puede ser producido mediante una impresora 3D con tecnología FDM, y los archivos necesarios están disponibles en <a href="https://www.thingiverse.com/thing:2755968">thingiverse.com</a>.</p>
<p>Para el diseño de las piezas personalizadas se utilizó el software de código abierto FreeCAD.</p>
<p><img alt="Modelado Adaptador" src="../img/freecad.png" /></p>
<p>Las piezas fueron impresas en una impresora 3D Hellbot Magna 1v2 usando filamento PLA.</p>
<p><img alt="Piezas Impresas" src="../img/piezas.png" /></p>
<p>Finalmente, se llevó a cabo el ensamblaje de todas las partes para completar el escáner modificado.</p>
<p><img alt="Escaner Ensamblado" src="../img/ensamble.png" /></p>
<h5 id="rutina-de-escaneo">Rutina de Escaneo</h5>
<p>Durante la prueba del escáner, se ejecuta una rutina de escaneo diseñada para capturar imágenes tridimensionales con precisión. Esta rutina comienza con un giro completo de 360° de la pieza en intervalos de 15°, deteniéndose en cada paso para la toma de las fotografías correspondientes. Posteriormente, el brazo lateral del escáner se inclina en un ángulo de 60° en ambas direcciones, con incrementos de 20° en cada movimiento. Cada vez que el brazo lateral se inclina, se realiza un giro completo de la pieza en escaneo, asegurando una cobertura exhaustiva del objeto en estudio.</p>
<p><img alt="Escaner Ensamblado" src="../img/rutina_escaneo.png" /></p>
<p>La rutina se puede apreciar en el siguiente gif:</p>
<p><img alt="Escaner Ensamblado" src="../img/rutina.gif" /></p>
<h3 id="procesado-de-imagenes">Procesado de Imágenes</h3>
<h4 id="acondicionamiento">Acondicionamiento</h4>
<p>Para optimizar y preparar las imágenes capturadas por el escáner 3D, se utilizó el software de manipulación de imágenes GNU Image Manipulation Program (GIMP). Se empleó la extensión Batch Image Manipulation para aplicar procesamiento a múltiples imágenes de manera eficiente.</p>
<p>El proceso de acondicionamiento consta de las siguientes etapas:</p>
<ul>
<li>
<p>Recorte:</p>
<ul>
<li>Se ajusta el recorte para alcanzar una relación de aspecto estándar de 1:1.</li>
</ul>
</li>
<li>
<p>Corrección de color:</p>
<ul>
<li>Las imágenes son convertidas a escala de grises.</li>
<li>Se aplica una corrección automática de los niveles de color para mejorar la calidad visual.</li>
</ul>
</li>
<li>
<p>Renombrado:</p>
<ul>
<li>Se realiza un renombrado de las imágenes siguiendo un patrón establecido para una mejor organización y referencia.</li>
</ul>
</li>
</ul>
<p><img alt="Acondicionamiento de imágenes en batch" src="../img/acondicionamiento.png" /></p>
<p><img alt="Acondicionamiento de imágenes en batch" src="../img/acondicionamiento_2.png" /></p>
<h4 id="reconstruccion-3d">Reconstrucción 3D</h4>
<p>La reconstrucción del modelo 3D se llevó a cabo utilizando el software de código abierto Meshroom. Este programa utiliza una técnica conocida como fotogrametría para reconstruir modelos tridimensionales a partir de imágenes 2D.</p>
<p>El proceso comienza cargando las imágenes obtenidas de cada escaneo en el programa Meshroom. A continuación, se ajustan los parámetros del flujo de trabajo, que incluyen configuraciones relacionadas con la detección de características, la correspondencia de puntos entre imágenes y la reconstrucción de la geometría del objeto escaneado.</p>
<p>Meshroom funciona utilizando un enfoque basado en la estructura de grafos para organizar y ejecutar las distintas etapas del proceso de reconstrucción. Cada imagen aporta información sobre la apariencia y la posición relativa del objeto desde diferentes ángulos, lo que permite al programa calcular la estructura tridimensional con precisión.</p>
<p>Es importante destacar que Meshroom es un proyecto de código abierto desarrollado por <a href="https://alicevision.org">AliceVision</a>, una comunidad de desarrollo de software que se enfoca en soluciones de visión por computadora y fotogrametría.</p>
<p><img alt="Workflow Meshroom" src="../img/workflow_2.png" /></p>
<p><img alt="Workflow Meshroom" src="../img/workflow_1.png" /></p>
<p>El análisis de las características de meshroom se puede observar aquí:</p>
<p><img alt="Procesado Meshroom" src="../img/procesado_meshroom.png" /></p>
<ul>
<li>En Azul --&gt; Feature Extraction</li>
<li>En Naranja --&gt; Feature Matching</li>
<li>En Rojo --&gt; Used in Reconstruction</li>
</ul>
<h3 id="mejora-condiciones">Mejora Condiciones</h3>
<h4 id="fotografias">Fotografías</h4>
<p>Se adquirió una cámara fotográfica compacta para mejorar la calidad de las imágenes obtenidas. Se usó una cámara Canon PowerShoot sx510 hs.</p>
<p><img alt="Cámara Canon PowerShoot sx510 hs" src="../img/camara.png" /></p>
<p>Se puede notar la considera mejora de la resolución:</p>
<p><img alt="Mejora resolución" src="../img/mejora_resolucion.png" /></p>
<p>Se agradece a la licenciada Fabiana Meza por el préstamo del equipo fotográfico.</p>
<h4 id="iluminacion">Iluminación</h4>
<p>Se mejoraron las condiciones de iluminación con luces LED flexibles que permitieran una iluminación uniforme sobre las muestras, para evitar sombras duras.</p>
<p>También se fabricó una caja de luz para lograr una iluminación controlada.</p>
<p><img alt="Caja de luz" src="../img/caja_de_luz.png" /></p>
<p>Se pueden observa las pruebas de iluminación a continuación:</p>
<p><img alt="Prueba con nueva iluminación controlada" src="../img/prueba_iluminacion.png" /></p>
<h2 id="version-20">Versión 2.0</h2>
<p>Se mejoró el primer diseño, eliminando uno de los brazos del soporte, y se incorporó un nuevo motor NEMA 17 para mejorar los ángulos de movimiento del brazo.</p>
<p><img alt="Versión 2.0" src="../img/version_2.png" /></p>
<h3 id="flujo-de-trabajo">Flujo de Trabajo</h3>
<h4 id="condiciones-de-captura">Condiciones de Captura</h4>
<p>Para tomar las fotografías de las muestras se emplearon los siguientes parámetros de la cámara:
 - Cantidad de fotos: ≈ 140-150 por muestra
 - Velocidad Obturador: 1/80 seg
 - Apertura Focal: F 5.0
 - Sensibilidad Sensor: ISO 100</p>
<p>Con el siguiente setup de trabajo:</p>
<p><img alt="Setup de trabajo" src="../img/setup_trabajo.png" /></p>
<h4 id="procesado-de-fotos">Procesado de Fotos</h4>
<p>Primero se proceso el modelo 3D en Meshroom:</p>
<p><img alt="Meshroom" src="../img/meshroom_1.png" /></p>
<p>Luego las mallas 3D fueron corregidas en Blender para eliminar el fondo y reparar malformaciones y huecos en las mismas:</p>
<p><img alt="Blender" src="../img/blender.png" /></p>
<p>Se muestran las operaciones de limpieza realizadas para obtener el modelo final del cráneo:</p>
<p><img alt="Limpieza Blender" src="../img/limpieza_blender.png" /></p>
<p>Luego estos pasos fueron replicados para cada muestra.</p>
<h2 id="codigo-arduino">Código arduino</h2>
<p>El siguiente código controla todo el setup de escaneo. Se utilizaron motores paso a paso 28byj-48 con el controlador ULN2003, configurados en Modo de Medio Paso para garantizar un movimiento suave. La información sobre el proceso de escaneo se visualiza en una pantalla LCD 16x2 con controlador I2C, mientras que las opciones del escaneo son ingresadas por el usuario a través de un joystick.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Escaner-fotometría.ino</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">  1</a></span>
<span class="normal"><a href="#__codelineno-0-2">  2</a></span>
<span class="normal"><a href="#__codelineno-0-3">  3</a></span>
<span class="normal"><a href="#__codelineno-0-4">  4</a></span>
<span class="normal"><a href="#__codelineno-0-5">  5</a></span>
<span class="normal"><a href="#__codelineno-0-6">  6</a></span>
<span class="normal"><a href="#__codelineno-0-7">  7</a></span>
<span class="normal"><a href="#__codelineno-0-8">  8</a></span>
<span class="normal"><a href="#__codelineno-0-9">  9</a></span>
<span class="normal"><a href="#__codelineno-0-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-0-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-0-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-0-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-0-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-0-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-0-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-0-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-0-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-0-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-0-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-0-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;AccelStepper.h&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span><span class="c1"> </span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;LiquidCrystal_I2C.h&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="c1">// stepper motor 28byj-48 </span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">STEPS_PER_REVOLUTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2038</span><span class="p">;</span><span class="w">  </span><span class="c1">// change this to fit the number of steps per revolution</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="c1">// Base Giratoria</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">PHOTOSTEP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">85</span><span class="p">;</span><span class="w"> </span><span class="c1">// 2048 steps / 360° = 5.68 steps/° --&gt; 15° = 85.2 steps</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">FULL_TURN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ANGLE_BASE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="c1">// Brazo</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ARMSTEP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">114</span><span class="p">;</span><span class="w"> </span><span class="c1">// 2048 steps / 360° = 5.68 steps/° --&gt; 20° = 113.6 steps</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ANGLE_ARM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="c1">// Motor 1 --&gt; Base giratoria</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="c1">// Motor 2 --&gt; Brazo</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="c1">// ULN2003 Motor 1 Driver Pins</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="cp">#define IN1_1 8</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="cp">#define IN2_1 9</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="cp">#define IN3_1 10</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="cp">#define IN4_1 11</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="c1">// ULN2003 Motor 2 Driver Pins</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="cp">#define IN1_2 4</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="cp">#define IN2_2 5</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="cp">#define IN3_2 6</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="cp">#define IN4_2 7</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="c1">// Joystick Pins</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="cp">#define JOYSTICK_X A1</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="cp">#define JOYSTICK_Y A0</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="cp">#define JOYSTICK_THRESHOLD 50</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="c1">// initialize the motor interface</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="n">AccelStepper</span><span class="w"> </span><span class="nf">Motor_1</span><span class="p">(</span><span class="n">AccelStepper</span><span class="o">::</span><span class="n">HALF4WIRE</span><span class="p">,</span><span class="w"> </span><span class="n">IN1_1</span><span class="p">,</span><span class="w"> </span><span class="n">IN3_1</span><span class="p">,</span><span class="w"> </span><span class="n">IN2_1</span><span class="p">,</span><span class="w"> </span><span class="n">IN4_1</span><span class="p">);</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="n">AccelStepper</span><span class="w"> </span><span class="nf">Motor_2</span><span class="p">(</span><span class="n">AccelStepper</span><span class="o">::</span><span class="n">HALF4WIRE</span><span class="p">,</span><span class="w"> </span><span class="n">IN1_2</span><span class="p">,</span><span class="w"> </span><span class="n">IN3_2</span><span class="p">,</span><span class="w"> </span><span class="n">IN2_2</span><span class="p">,</span><span class="w"> </span><span class="n">IN4_2</span><span class="p">);</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="c1">// Button</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="cp">#define BUTTON_JOYSTICK 12</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="c1">// Define la dirección I2C del LCD</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="cp">#define I2C_ADDR 0x27</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="c1">// Define las dimensiones del LCD</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="cp">#define LCD_WIDTH 16</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="cp">#define LCD_HEIGHT 2</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="c1">// Inicializa el objeto LiquidCrystal_I2C</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="n">LiquidCrystal_I2C</span><span class="w"> </span><span class="nf">lcd</span><span class="p">(</span><span class="n">I2C_ADDR</span><span class="p">,</span><span class="w"> </span><span class="n">LCD_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">LCD_HEIGHT</span><span class="p">);</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">  </span><span class="c1">// set the maximum speed, acceleration factor,</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">    </span><span class="c1">// initial speed and the target position</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">  </span><span class="n">Motor_1</span><span class="p">.</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">  </span><span class="n">Motor_1</span><span class="p">.</span><span class="n">setAcceleration</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="w">  </span><span class="c1">//Motor_1.setSpeed(200);</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="w">  </span><span class="n">Motor_2</span><span class="p">.</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="w">  </span><span class="n">Motor_2</span><span class="p">.</span><span class="n">setAcceleration</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="w">  </span><span class="c1">//Motor_2.setSpeed(200);</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="w">  </span><span class="c1">// initialize the button pin as input</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">BUTTON_JOYSTICK</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">  </span><span class="c1">// initialize the serial port</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">  </span><span class="c1">// Inicializa el LCD utilizando I2C</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">backlight</span><span class="p">();</span><span class="w"> </span><span class="c1">// Enciende la retroiluminación</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">  </span><span class="n">PantallaInicio</span><span class="p">();</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="p">}</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="c1">// ==============================================================</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="w">  </span><span class="c1">// Leer los valores del joystick</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">joyX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analogRead</span><span class="p">(</span><span class="n">JOYSTICK_X</span><span class="p">);</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">  </span><span class="c1">//delay(100);</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">joyY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">analogRead</span><span class="p">(</span><span class="n">JOYSTICK_Y</span><span class="p">);</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">  </span><span class="c1">//delay(100);</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">buttonValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">digitalRead</span><span class="p">(</span><span class="n">BUTTON_JOYSTICK</span><span class="p">);</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">  </span><span class="c1">// Mover el brazo hacia adelante o hacia atrás</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">joyX</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JOYSTICK_THRESHOLD</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">joyX</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">      </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="o">-</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="w">      </span><span class="n">PantallaInicio</span><span class="p">();</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">      </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">      </span><span class="n">PantallaInicio</span><span class="p">();</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">  </span><span class="c1">// Girar la base hacia la izquierda</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">joyY</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JOYSTICK_THRESHOLD</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">joyY</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="w">    </span><span class="n">GirarBaseCompleta</span><span class="p">();</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="w">    </span><span class="n">PantallaInicio</span><span class="p">();</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="w">  </span><span class="c1">// Espera a que se presione el botón</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">buttonValue</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LOW</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;   Realizar&quot;</span><span class="p">);</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;  Escaneo...&quot;</span><span class="p">);</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">    </span><span class="n">RealizarEscaneo</span><span class="p">();</span><span class="w"> </span><span class="c1">// Función para realizar el escaneo completo</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;   Escaneo&quot;</span><span class="p">);</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;  Completado!&quot;</span><span class="p">);</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="p">}</span><span class="w"> </span><span class="c1">// fin loop</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="c1">// ==============================================================</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="c1">// Función para realizar los movimientos</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="kt">void</span><span class="w"> </span><span class="nf">RealizarEscaneo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="c1">// Se mueve para atrás</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">    </span><span class="n">GirarBaseCompleta</span><span class="p">();</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="w">    </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="o">-</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="c1">// Vuelve al medio</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">    </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="c1">// Se mueve para adelante</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="w">    </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="w">    </span><span class="n">GirarBaseCompleta</span><span class="p">();</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="c1">// Vuelve al medio</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="w">    </span><span class="n">MoverBrazo</span><span class="p">(</span><span class="o">-</span><span class="n">ANGLE_ARM</span><span class="p">);</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="p">}</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="c1">// Función para girar la base completa</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="kt">void</span><span class="w"> </span><span class="nf">GirarBaseCompleta</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Girando base...&quot;</span><span class="p">);</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">FULL_TURN</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="w">    </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s">&quot;vuelta: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&quot; de 24&quot;</span><span class="p">));</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="w">    </span><span class="n">Motor_1</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">ANGLE_BASE</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">STEPS_PER_REVOLUTION</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">360</span><span class="p">));</span><span class="w"> </span><span class="c1">//el 2 es para compensar por manejar en medio paso el motor</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="w">    </span><span class="n">Motor_1</span><span class="p">.</span><span class="n">runToPosition</span><span class="p">();</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="p">}</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="c1">// Función para mover el brazo</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="kt">void</span><span class="w"> </span><span class="nf">MoverBrazo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">angle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;Girando +brazo...&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;Girando -brazo...&quot;</span><span class="p">);</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s">&quot;paso: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">ANGLE_ARM</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&quot; grados&quot;</span><span class="p">));</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="w">  </span><span class="n">Motor_2</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">STEPS_PER_REVOLUTION</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">360</span><span class="p">));</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="w">  </span><span class="n">Motor_2</span><span class="p">.</span><span class="n">runToPosition</span><span class="p">();</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="p">}</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="c1">// Función para reinciar LCD</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="kt">void</span><span class="w"> </span><span class="nf">PantallaInicio</span><span class="p">(){</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="w">  </span><span class="c1">// set the cursor to column 0, line 1</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">  </span><span class="c1">// (note: line 1 is the second row, since counting begins with 0)</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;   Fotometria&quot;</span><span class="p">);</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="w">  </span><span class="n">lcd</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Elija opcion...&quot;</span><span class="p">);</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/alejandroescobar264"  target="_blank" rel="noopener">Alejandro Escobar</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>